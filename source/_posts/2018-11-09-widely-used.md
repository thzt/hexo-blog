---
layout: post
categories: Design
title: 怎样让自己写的代码更通用
---

软件的一大好处是可以将重复的机械劳动**自动化**，

因此，软件工程师们大多数对**重复**都深恶痛疾。

一旦发现有重复的迹象，就会想尽办法用技术手段去规避它。

<br/>

但是，实际项目中的**业务逻辑**总是错综复杂，

有很多**看似重复**的场景，但又不完全一样。

<br/>

因此，到底怎样才能用更低的**成本**把问题**解决**掉，

是一件值得**斟酌**的事情。

<br/>

### 成本和价值

成本和价值不同，

对于软件而言，**成本**的一部分是，编码过程中所投入的人力成本，

而**价值**则与软件的用户由于使用软件，切实得到的收益有关。

<br/>

只有能帮用户解决问题的软件，才有价值。

用户**并不关心**软件的编码情况，

只关心软件是否**解决**了自己的**问题**。

<br/>

因此，具有重复代码的软件，**也能**解决问题，

这是再怎么强调也不为过的事情。

<br/>

### 降低成本

但是，重复度高的代码，其实不好**维护**，

每次变更都必须要同时修改好几个地方，很容易改错，

因此，软件工程师们都**不喜欢**重复代码。

<br/>

重复代码意味着**重复劳动**。

<br/>

但是，用户并不关心这一点，

因为消除代码重复，并不会帮**用户**解决更多的问题，

它只解决了工程师们**自己**的问题。

<br/>

因此，**降低成本**和**提高价值**是两码事。

<br/>

### 起到作用

如果软件对用户来说没有帮助，就没有人用它，

代码也是如此，

一段代码如果没有作用，就更谈不上**通用**了。

<br/>

因此，为了让代码具有通用性，就先得让代码**起到作用**。

这会迫使我们站在代码的**使用者**角度考虑问题，

而不是考虑代码写成什么样更好。

<br/>

能抓住用户的核心问题，即使代码写的不好，

也是有作用的，

这胜过了一切编写优雅但是解决不了问题的代码。

<br/>

### 通用性

在实现用户需求的时候，一个常见的误区是**简化需求**，

很多软件工程师，为了用更通用的办法解决问题，

会人为的**删减**需求。

<br/>

这样虽然能够写出简洁的代码，但是同时也会遗漏大量**细节**。

为了代码简洁而**不顾**用户的真实需求，

是一种**自欺欺人**的表现。

<br/>

因此，面对真实的用户需求，应该直面它的**客观**复杂度，

代码好不好写是**次要的**，不应该影响待解决的问题。

<br/>

### 用户群

现实世界中的问题具有多样性，有时候找不到**统一的**解决方案，

这时候就应该**放弃**通用性，

为每一类问题，专门定制一套方案去解决。

<br/>

这样制定的一族方案，反而具备了高度通用性。

<br/>

因此为了让代码更通用，我们就必须对用户深入了解，

照顾到每一个用户的**特殊需求**。

这样才能让我们的软件被更多的人使用。

<br/>

### 产品形态

然而，不加分别的盲目照顾所有用户的需求，也是不合理的，

因为有的用户可能**不需要**我们为其他用户定制开发的功能，

我们也没有精力满足所有人的需要。

<br/>

就不得不进行**取舍**。

<br/>

在业务领域中我们应该努力**提取**出投入产出比更高的问题类，

使得这一类问题解决后，能让更多的人受益。

<br/>

注意这与软件工程师们人为的删减需求是不同的，

软件工程师们删减需求只是为了让实现更简单，是不可取的，

而在业务领域中提取**公共子问题**，是为了正中要害。

<br/>

### 结语

通用的代码，不见得会写的多么优雅，

而在于代码的作者找到了更通用的问题子类。

<br/>

写出通用的代码，也不见得要先对问题找出通用解法，

没有通用解法的问题，我们也可以写出一套代码去解决它。

<br/>

最后，我们还要**敢于确定**哪些人不是我们的用户，

集中精力做更重要的事情。
