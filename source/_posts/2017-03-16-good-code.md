---
layout: post
categories: Mind
title: 什么样的代码才算是好代码
---

我们经常指责别人写的代码，

例如，他们使用了过多的嵌套循环，或者使用了过多的if-else，

或者异常处理方式跟“业界”认可的方式不同，

他们写的代码维护成本很高，是技术债务。

<br/>

却不知，他们一定也在指责我们，

我们引入了过多不必要的抽象，我们写的通用代码结果只在一个地方被用到，

我们进行了过度设计，拥有代码洁癖，

他们指出，我们担心的事情永远都没有发生过。

<br/>

那么，到底什么才是好代码呢？

**我们凭什么指出某种写法是技术债务，而另外一种不是。**

除去心理因素，“平铺直叙”的代码真的就那么难以维护吗？

<br/>

在这个问题上，经验似乎说明不了什么问题，

我们深信某种写法较好，仅仅是我们那么认为而已。

如果其他人不这么认为，也没有办法。

<br/>

我们可能会在白板上跟别人争执，

讨论代码的演化路径，大谈设计模式，考虑各种开发原则，

这些似乎都没有什么用，

关于什么样的写法更好，谁也说服不了谁。

<br/>

对于未来的发展状况，你说会发生，

别人说不会发生，你还能怎样。

<br/>

### 假设应该如何被检验

可读性，可维护性，是人们讨论最多的话题，

可是，为什么没有人对性能存有争议，

为什么没有人对哪段代码效率更高各执一词？

<br/>

这是因为，性能指标是可以**量化**的，

我们可以很简单的**通过数据**来证明自己的假设。

但是，我们证明可读性与可维护性的时候，却没有这样。

<br/>

我们仅仅是强调它们确实这样，以及如果不这样会有什么后果。

可是强调起不到任何作用，预测也很容易被反驳，

因此，**我们应该想办法用数据去证明它**。

<br/>

很多无法达成共识的想法，也是如此，

如果与其他人产生了冲突，那一定是两个人对问题有了不同的认识，

然而，这些认识都只是假设，谈不上谁对谁错，

因为**缺乏事实论据**。

<br/>

使用事实论据，其实来源于科学方法。

科学家们会通过逻辑推理得到一些结论，

同时，必然也会用实验结果去检验这些结论，

不然大家谁都无法说服对方。

<br/>

追求逻辑的严密性和正确性的理论学家，是重要的，

而**构造巧妙的实验，给出事实论据**的实验学家，无疑更重要。

<br/>

### 用数据说服别人

<br/>

当我们想说服别人的事情，如果总是难以凑效，

其实，缺少的就是那些统计数据了。

<br/>

我们难以说服别人开会影响了工作效率，

是因为我们没有对开会的时间进行统计，

也没有对开会之后，大家回到正常工作状态的平均时间进行分析，

只是我们觉得会受影响。

<br/>

此外，如果不开会，大家可能信息闭塞，

会造成多少重大事故，我们也不知道，

事实上，也可能不会是我们假设的那么少。

<br/>

如果有这些数据，就不是谁说服谁的问题了，而是不证自明，

有可能，某些会议是必须要进行的，

有可能，持续超过几个小时的会议将是毫无意义的。

<br/>

于是，事情就回归到它的本来面目了，不是想象中的那么简单。

<br/>

另外一个例子，

当我们依赖别人的功能组件时，他们频繁的发布更新，

是我们不能忍受的，但是我们又无法说服他们不这样做。

<br/>

这时候，我们也可以通过数据来论证，

例如，发布导致了我们多少损失，

哪些发布是可以合并的，合并它们会导致我们节省多少时间。

<br/>

**事实胜于雄辩。**

<br/>

### 结语

一味的追求什么样的代码才是好代码，是没有意义的，

每个人都可能有不同的认识，进行不同的假设，

**唯一的办法，就是构造可行的实验，用数据得到结论。**

<br/>

值得一提的是，我们采集数据的方式，很有可能会对我们的假设有利，

这时候，就需要互相监督和学习，**识别采集数据时被忽视的一些前提条件**，

这样得出的结论才更加公正。

<br/>

就像AlphaGo对围棋的影响一样，促使人们思考“定式”是否真的是合理的。

对代码进行数据分析，也会促使我们思考“模式”和“原则”是否真的那么有用。
